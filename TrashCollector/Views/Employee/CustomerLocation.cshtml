@model TrashCollector.Models.GeoCoderAddress

@{
    ViewBag.Title = "CustomerLocation";
}

<h2>Customer Location</h2>

<div id="map"></div>
<script>
    
    function initializeMap() {
        var address = @Html.Raw(Json.Encode(Model.address));
        var geocoder = new google.maps.Geocoder();
        var latitude;
        var longitude;

        geocoder.geocode({ address: address }, function (results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                latitude = results[0].geometry.location.lat();
                longitude = results[0].geometry.location.lng();
            }
        })

        var location = { lat: latitude, lng: longitude};
        var map = new google.maps.Map(document.getElementById('map'), { zoom: 4, center: location });
        var marker = new google.maps.Marker({ position: location, map: map });
    }
</script>
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBib0Ur8ArkV8aLFBcyohp-6mpkzxrdU1Y&callback=initializeMap">
</script>

<p>
    @Html.ActionLink("Back to List", "Index")
</p>
